---
title: "vim操作"
layout: post
date: 2017-06-17
tags:
- Linux
categories: LINUX
blog: true
excerpt: vim基础概念，常用指令
---

## 基本概念

3种模式，一般模式，编辑模式（按下i,o,a,r等进入），命令行模式（按下:,/,?三个字符时进入），esc退到一般模式

## 常用按键

- hjkl：左下上右
- ctrl+f：下一页；ctrl+b：上一页
- n<space>：如20空格，字符跳到当前光标后的20的字符
- 0：数字0，跳到当前行的第一个字符；$：跳到当前行最后一个字符
- G：移到文件最后一行；nG：如10G，移到文件的第10行；gg：移到文件第一行
- /word：向下查找字符串；?word：向上查找字符串
- n：查找字符串匹配下一个；N：查找字符串匹配上一个
- n1,n2s/word1/word2/g：从第n1行到n2行替换word1到word2；1,$s/word1/word2/g：从第一行到最后一行；
- 1,$s/word1/word2/gc：多个c，会在替换前进行提示（y表示替换,n表示不替换,q表示退出替换操作,已替换的不会还原,a表示全部替换不再提示），选择某个操作会自动选择到下一个匹配的字符串
- x：删除光标后一个字符；X：删除前一个字符；10x：删除后面10个字符
- dd：删除当前行；10dd：删除10行
- yy：复制当前行；10yy：向下复制10行
- p：将复制的数据粘贴到光标下一行；P：粘贴到上一行
- u：复原上一次操作；ctrl+r：重做上一次操作，如u操作错了恢复用
- .：小数点，重复上一次操作
- ctrl+v：选择要复制的块，选择后按y复制完成，反白消失；接着p粘贴，会直接在光标的右侧粘贴，和一般的复制粘贴不一样                                                                     
- :w：保存不退出；wq：保存并退出；q!不保存并退出
- :w [filename]：另存为到另一个文件
- :set nu：设置行号；set nonu：取消行号
- vim file1 file2：同时打开多个文件
- :open file2：file1已打开的情况下打开file2
- :n：编辑下一个文件
- :N：编辑上一个文件
- :files：显示所有vim打开的文件
- :sp [filename]：多窗口，file不存在则新建，存在则打开，如省略，会出现两个显示一样的窗口，没意义
- cttl+w+j或下方向键：窗口向下；ctrl+w+k或上方向键：向上
- ctrl+w两次会来回切换窗口


## 警告信息

在vim时，会生成一个.swp文件，在非正常流程结束时，会保留这个文件，这个文件记录用户对文件的操作。在下次打开时会提示进行操作：

- o: open rend-only，只读形式打开
- r：要复原swp文件的内容时使用，复原保存后还需要自己手动删除swp文件
- d：将swp文件删除
